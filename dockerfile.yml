FROM python:3.9.4-alpine3.13

COPY . /usr/src/chivalry
COPY ../api_mongo /usr/src/api

WORKDIR /usr/src/chivalry

RUN docker-compose up \
&& pip freeze > requirements.txt\
&& pip install -r requirements.txt \
&& cd ../api \
&& npm install \
&& npm run start \
<<<<<<< HEAD
&& cd ../chivalry 


CMD [ "python ./main.py" ]
=======
&& cd ../chivalry


CMD [ "main.py" ]
>>>>>>> origin/ia_knight


# docker build . -t chivalry_dev:1
# docker run --rm -it chivalry_dev:1